<div class="absolute w-full top-0 left-0 right-0">
    <mat-progress-bar  mode="indeterminate" color="accent" *ngIf="isLoading"></mat-progress-bar>
</div>

<div *ngIf="!!album" class="absolute left-0 top-0 w-full h-[50vh]" [style]="'background: linear-gradient(180deg, ' + (album?.artwork?.accentColor || accentColor) + '80 0%, ' + (album?.artwork?.accentColor || accentColor) + '00 100%);'"></div>

<section *ngIf="!isLoading && !album">
    <div class="flex justify-center items-center flex-col w-full p-10 text-left">
        <h1>
            <span class="text-sm w-full block text-accent-dark">404 Not Found</span>
            Whooops!
        </h1>

        <p class="mt-4">Das Album, das du suchst, konnte nicht gefunden werden.</p>
    </div>
</section>

<asc-playlist-view [options]="{ type: 'album', title: album?.title, artwork: album?.artwork }" *ngIf="!isLoading && !!album" >

    <!-- Quick info bar below title -->
    <div class="py-2 md:pt-2 md:pb-0 md:flex md:items-center" asc-stats>
        <ul class="flex md:inline-flex items-center gap-2">
            <asc-artist-badge *ngIf="album?.artist" [artist]="album?.artist" [routerLink]="['/artist', album?.artist?.id]"></asc-artist-badge>

            <li class="inline opacity-60" *ngIf="album?.featuredArtists?.length > 0">
                <div class="inline-flex items-center">
                    <span class="text-sm mr-1" *ngIf="album?.artist">+{{ album?.featuredArtists?.length }}</span>
                    <asc-artwork class="w-6 aspect-square rounded-full overflow-hidden transform-gpu cursor-pointer" [ngClass]="{'shadow-md': i != 0 }" *ngFor="let featured of album?.featuredArtists; index as i" [artwork]="featured.artwork" [showAccent]="false" [matTooltip]="featured.name" [routerLink]="['/artist', featured.id]"></asc-artwork>
                </div>
            </li>
        </ul>

        <ul class="pt-2 flex md:inline-flex items-center md:p-0 gap-3 md:ml-0.5">
            <li class="inline text-xs opacity-60">{{ album?.released | date:"yyyy" }}</li>
            <li class="inline text-xs opacity-60">{{ album?.songsCount }} {{ album?.songsCount != 1 ? "Songs" : "Song" }}</li>
            <li class="inline text-xs opacity-60">{{ album?.totalDuration | totalDurationPipe }}</li>
        </ul>
    </div>

    <!-- Page contents -->
    <div asc-contents>
        <section class="relative mb-row z-10" *ngIf="($songs | async)?.length > 0">
            <!-- Songs list -->
            <asc-song-list [dataSource]="$songs" [showAlbum]="false" [showDate]="false" [showCover]="false" [showMore]="($songs | async).length < totalElements"></asc-song-list>
        </section>

        <section *ngIf="($songs | async)?.length <= 0 && !isLoadingSongs">
            <asc-message>Keine Songs f√ºr dieses Album gefunden.</asc-message>
        </section>
    </div>
</asc-playlist-view>

<!-- Recommended albums -->
<section class="relative mt-row z-10" *ngIf="album?.artist && recommendedAlbums?.length > 0">
    <asc-horizontal-grid [headline]="'Mehr von ' + album?.artist?.name" (more)="showDiscography()" [enableMore]="true" customMoreText="Diskographie anzeigen">
        <asc-album-grid-item *ngFor="let recommended of recommendedAlbums" [album]="recommended" [preferDate]="true" [routerLink]="['/album', recommended?.slug || recommended?.id]"></asc-album-grid-item>
    </asc-horizontal-grid>
</section>